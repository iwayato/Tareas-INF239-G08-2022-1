<?php include '../include/navbar_canciones.html'; ?>

<title>Tiwal - Canciones</title>

<h2 id="title" class="p-3 ms-4">Canciones</h2>

<div class="container">
    <br/>
    <table id="songs_table" class="table table-striped">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Compositor</th>
                <th>Álbum</th>
                <th>&nbsp;</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<script type="application/javascript">

    function addRecord(record) {
        let songsTableBody = $('#songs_table > tbody');

        let newRow =
            '<tr data-id="' + record.id + '">' +
            '   <td>' + record.nombre + '</td>' +
            '   <td>' + record.compositores + '</td>' +
            '   <td>' + record.nombre_album + '</td>' +
            `   <td><a href="perfil_cancion.html?nombre=${record.nombre}&compositores=${record.compositores}&nombre_album=${record.nombre_album}&fecha_composicion=${record.fecha_composicion}&letra=${record.letra}">Perfil Canción</a></td>` +
            '</tr>';
        songsTableBody.append(newRow);
    }

    $(document).ready(function () {
        $.get('../php/read_canciones.php', function (resp) {
            let results = JSON.parse(resp);

            $.each(results, function (i, record) {
                addRecord(record);
            });
        });
    });
    
</script>

</body>
</html>